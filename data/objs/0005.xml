<thing>
 <id>5</id>
 <parent>1</parent>
 <owner>2</owner>
 <permissions>075</permissions>
 <properties>
  <entry key="location" type="thing">
   -1
  </entry>
  <entry key="contents" type="array">
   <owner>-1</owner>
   <permissions>075</permissions>
  </entry>
  <entry key="name" type="string">
   <owner>-1</owner>
   <permissions>075</permissions>
   <value>generic channel</value>
  </entry>
 </properties>
 <methods>
  <entry key="join" type="moolambda">
   <owner>-1</owner>
   <permissions>075</permissions>
   <params></params>
   <code><![CDATA[
	(if (= (this.users:search user) -1)
		(begin
			(this.users:push user)
			(this.users:foreach (lambda (cur)
				(cur:notify 'join' user channel "")))))
   ]]></code>
  </entry>
  <entry key="leave" type="moolambda">
   <owner>-1</owner>
   <permissions>075</permissions>
   <params></params>
   <code><![CDATA[
       (if (!= (this.users:search user) -1)
       	(begin
       		(this.users:foreach (lambda (cur)
       			(cur:notify 'leave' user channel "")))
       		(this.users:remove user)))
   ]]></code>
  </entry>
  <entry key="quit" type="moolambda">
   <owner>-1</owner>
   <permissions>075</permissions>
   <params></params>
   <code><![CDATA[
       (if (!= (this.users:search user) -1)
       	(begin
       		; TODO there should only be one quit message per user but we can only control the channel's quit...
       		;(this.users:foreach (lambda (cur)
       		;	(cur:notify 'quit' user channel "")))
       		(this.users:remove user)))
   ]]></code>
  </entry>
  <entry key="say" type="moolambda">
   <owner>-1</owner>
   <permissions>075</permissions>
   <params>text</params>
   <code><![CDATA[
       (this.users:foreach (lambda (cur)
       	(cur:notify 'say' user channel text)))
   ]]></code>
  </entry>
  <entry key="emote" type="moolambda">
   <owner>-1</owner>
   <permissions>075</permissions>
   <params>text</params>
   <code><![CDATA[
       (this.users:foreach (lambda (cur)
       	(cur:notify 'emote' user channel text)))
   ]]></code>
  </entry>
  <entry key="names" type="moolambda">
   <owner>-1</owner>
   <permissions>075</permissions>
   <params></params>
   <code><![CDATA[
       (define names "")
       (this.users:foreach (lambda (cur)
       	(set names (concat names cur.name " "))))
       ;(chop names)
   ]]></code>
  </entry>
  <entry key="command" type="moolambda">
   <owner>-1</owner>
   <permissions>075</permissions>
   <params>text</params>
   <code><![CDATA[
       (user:notify 'status' nil channel "Commands are not supported in this channel.")
   ]]></code>
  </entry>
 </methods>
</thing>
