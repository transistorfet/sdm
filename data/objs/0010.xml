<thing>
 <id>10</id>
 <parent>8</parent>
 <owner>2</owner>
 <permissions>075</permissions>
 <properties>
  <entry key="location" type="thing">
   -1
  </entry>
  <entry key="contents" type="array">
   <owner>-1</owner>
   <permissions>075</permissions>
  </entry>
  <entry key="looked_at" type="string">
   <owner>-1</owner>
   <permissions>075</permissions>
   <value>$user.name looks around the room.</value>
  </entry>
  <entry key="name" type="string">
   <owner>-1</owner>
   <permissions>075</permissions>
   <value>room</value>
  </entry>
  <entry key="title" type="string">
   <owner>-1</owner>
   <permissions>075</permissions>
   <value>someplace</value>
  </entry>
 </properties>
 <methods>
  <entry key="n" type="moolambda">
   <owner>-1</owner>
   <permissions>075</permissions>
   <params></params>
   <code><![CDATA[(this:go 'north')]]></code>
  </entry>
  <entry key="e" type="moolambda">
   <owner>-1</owner>
   <permissions>075</permissions>
   <params></params>
   <code><![CDATA[(this:go 'east')]]></code>
  </entry>
  <entry key="d" type="moolambda">
   <owner>-1</owner>
   <permissions>075</permissions>
   <params></params>
   <code><![CDATA[(this:go 'down')]]></code>
  </entry>
  <entry key="s" type="moolambda">
   <owner>-1</owner>
   <permissions>075</permissions>
   <params></params>
   <code><![CDATA[(this:go 'south')]]></code>
  </entry>
  <entry key="w" type="moolambda">
   <owner>-1</owner>
   <permissions>075</permissions>
   <params></params>
   <code><![CDATA[(this:go 'west')]]></code>
  </entry>
  <entry key="u" type="moolambda">
   <owner>-1</owner>
   <permissions>075</permissions>
   <params></params>
   <code><![CDATA[(this:go 'up')]]></code>
  </entry>
  <entry key="look" type="moolambda">
   <owner>-1</owner>
   <permissions>075</permissions>
   <params><![CDATA[&all]]></params>
   <code><![CDATA[
	(if (null (args:get 0))
		(this:look_self)
		(begin
			; TODO lookup the argument if it's a string and call look_self on it
		)
	)
   ]]></code>
  </entry>
  <entry type="moolambda" key="look_self">
   <owner>-1</owner>
   <permissions>075</permissions>
   <params></params>
   <code><![CDATA[
	(user:notify 'status' nil channel (format "<yellow>$this.title"))
	(user:notify 'status' nil channel (format "<lightgreen>$this.description"))
	(user.location.contents:foreach (lambda (cur)
		(user:notify 'status' nil channel (format "<blue>$cur.title"))))
   ]]></code>
  </entry>
  <entry key="say" type="moolambda">
   <owner>-1</owner>
   <permissions>075</permissions>
   <params>text</params>
   <code><![CDATA[
	(this.contents:foreach (lambda (cur)
		(cur:notify 'say' user channel text)))
   ]]></code>
  </entry>
  <entry key="emote" type="moolambda">
   <owner>-1</owner>
   <permissions>075</permissions>
   <params>text</params>
   <code><![CDATA[
	(this.contents:foreach (lambda (cur)
		(cur:notify 'emote' user channel text)))
   ]]></code>
  </entry>
  <entry key="go" type="moolambda">
   <owner>-1</owner>
   <permissions>075</permissions>
   <params>dir</params>
   <code><![CDATA[

   ]]></code>
  </entry>
 </methods>
</thing>
